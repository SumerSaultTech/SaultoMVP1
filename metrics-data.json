{
  "kpiMetrics": {
    "1": {
      "companyId": 1748544793859,
      "name": "Annual Revenue",
      "description": "Total annual revenue from all closed won opportunities",
      "sqlQuery": "SELECT COALESCE(SUM(hubspot.amount), 0) + COALESCE(SUM(salesforce.amount), 0) AS metric_value FROM (SELECT amount FROM analytics_company_{companyId}.hubspot_deal WHERE dealstage = 'closedwon' AND closedate >= DATE_TRUNC('year', CURRENT_DATE)) AS hubspot FULL OUTER JOIN (SELECT amount FROM analytics_company_{companyId}.salesforce_opportunity WHERE stagename = 'Closed Won' AND closedate >= DATE_TRUNC('year', CURRENT_DATE)) AS salesforce ON TRUE;",
      "yearlyGoal": "1000000",
      "goalType": "yearly",
      "quarterlyGoals": {
        "Q1": "",
        "Q2": "",
        "Q3": "",
        "Q4": ""
      },
      "monthlyGoals": {
        "Jan": "",
        "Feb": "",
        "Mar": "",
        "Apr": "",
        "May": "",
        "Jun": "",
        "Jul": "",
        "Aug": "",
        "Sep": "",
        "Oct": "",
        "Nov": "",
        "Dec": ""
      },
      "category": "revenue",
      "format": "currency",
      "isIncreasing": true,
      "isNorthStar": true,
      "id": 1,
      "lastCalculatedAt": null,
      "value": "0"
    },
    "2": {
      "companyId": 1748544793859,
      "name": "Annual Profit",
      "description": "Total annual profit calculated as revenue minus expenses",
      "sqlQuery": "SELECT COALESCE((SELECT SUM(amount) FROM analytics_company_{companyId}.salesforce_opportunity WHERE stagename = 'Closed Won' AND EXTRACT(YEAR FROM closedate) = EXTRACT(YEAR FROM CURRENT_DATE)), 0) - COALESCE((SELECT SUM(amount) FROM analytics_company_{companyId}.hubspot_deal WHERE dealstage = 'expense' AND EXTRACT(YEAR FROM closedate) = EXTRACT(YEAR FROM CURRENT_DATE)), 0) as metric_value",
      "yearlyGoal": "500000",
      "goalType": "yearly",
      "quarterlyGoals": {
        "Q1": "",
        "Q2": "",
        "Q3": "",
        "Q4": ""
      },
      "monthlyGoals": {
        "Jan": "",
        "Feb": "",
        "Mar": "",
        "Apr": "",
        "May": "",
        "Jun": "",
        "Jul": "",
        "Aug": "",
        "Sep": "",
        "Oct": "",
        "Nov": "",
        "Dec": ""
      },
      "category": "finance",
      "format": "currency",
      "isIncreasing": true,
      "isNorthStar": true,
      "id": 2,
      "lastCalculatedAt": null,
      "value": "0"
    },
    "3": {
      "companyId": 1748544793859,
      "name": "Monthly Recurring Revenue (MRR)",
      "description": "Total predictable revenue generated from subscriptions on a monthly basis.",
      "sqlQuery": "SELECT COALESCE(SUM(hubspot_deal.amount), 0) + COALESCE(SUM(salesforce_opportunity.amount), 0) AS mrr FROM (SELECT amount FROM analytics_company_{companyId}.hubspot_deal WHERE dealstage = 'Closed Won' AND dealtype = 'Subscription' AND closedate >= DATE_TRUNC('month', CURRENT_DATE)) AS hubspot_deal FULL OUTER JOIN (SELECT amount FROM analytics_company_{companyId}.salesforce_opportunity WHERE stagename = 'Closed Won' AND type = 'Subscription' AND closedate >= DATE_TRUNC('month', CURRENT_DATE)) AS salesforce_opportunity ON TRUE;",
      "yearlyGoal": "$1,200,000",
      "goalType": "yearly",
      "quarterlyGoals": {
        "Q1": "",
        "Q2": "",
        "Q3": "",
        "Q4": ""
      },
      "monthlyGoals": {
        "Jan": "",
        "Feb": "",
        "Mar": "",
        "Apr": "",
        "May": "",
        "Jun": "",
        "Jul": "",
        "Aug": "",
        "Sep": "",
        "Oct": "",
        "Nov": "",
        "Dec": ""
      },
      "category": "revenue",
      "format": "currency",
      "isIncreasing": true,
      "isNorthStar": false,
      "id": 3,
      "lastCalculatedAt": null,
      "value": "0"
    },
    "6": {
      "companyId": 1748544793859,
      "name": "Customer Satisfaction Score",
      "description": "Average customer satisfaction rating",
      "sqlQuery": "SELECT 85 as current_value, 85 as yearly_goal",
      "yearlyGoal": "85",
      "category": "retention",
      "format": "number",
      "id": 6,
      "lastCalculatedAt": null,
      "value": "0"
    },
    "8": {
      "companyId": 1748544793859,
      "name": "Customer Acquisition Cost (CAC)",
      "description": "The cost associated with acquiring a new customer.",
      "sqlQuery": "WITH total_expenses AS (SELECT SUM(amount) AS total_amount FROM (SELECT amount FROM analytics_company_{companyId}.hubspot_deal WHERE closedate >= DATE_TRUNC('year', CURRENT_DATE) AND dealstage = 'Closed Won' UNION ALL SELECT amount FROM analytics_company_{companyId}.salesforce_opportunity WHERE closedate >= DATE_TRUNC('year', CURRENT_DATE) AND stagename = 'Closed Won') AS combined_deals), new_customers AS (SELECT COUNT(DISTINCT email) AS customer_count FROM (SELECT email FROM analytics_company_{companyId}.hubspot_contact WHERE created_date >= DATE_TRUNC('year', CURRENT_DATE) UNION SELECT email FROM analytics_company_{companyId}.salesforce_contact WHERE created_date >= DATE_TRUNC('year', CURRENT_DATE)) AS combined_contacts) SELECT COALESCE(total_amount / NULLIF(customer_count, 0), 0) AS customer_acquisition_cost FROM total_expenses, new_customers;",
      "yearlyGoal": "Decrease by 10% annually",
      "goalType": "yearly",
      "quarterlyGoals": {
        "Q1": "",
        "Q2": "",
        "Q3": "",
        "Q4": ""
      },
      "monthlyGoals": {
        "Jan": "",
        "Feb": "",
        "Mar": "",
        "Apr": "",
        "May": "",
        "Jun": "",
        "Jul": "",
        "Aug": "",
        "Sep": "",
        "Oct": "",
        "Nov": "",
        "Dec": ""
      },
      "category": "efficiency",
      "format": "currency",
      "isIncreasing": true,
      "isNorthStar": false,
      "id": 8,
      "lastCalculatedAt": null
    }
  }
}